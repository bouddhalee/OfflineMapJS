<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="./leaflet.css" />
    <style>
        #map { height: 720px; }
    </style>
    <!-- https://www.npmjs.org/package/queue-async -->
    <script type="text/javascript" src="./leaflet.js"></script>
    <script type="text/javascript" src="./queue.v1.min.js"></script>
    <script type="text/javascript" src="./IndexedDBShim.min.js"></script>
    <script type="text/javascript" src="./idbstore.min.js"></script>
    <script type="text/javascript" src="./offlinemap.js"></script>
    <script>
        mapquestUrl = 'http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png'
        subDomains = ['otile1','otile2','otile3','otile4']
        mapquestAttrib = 'Data, imagery and map information provided by <a href="http://open.mapquest.co.uk" target="_blank">MapQuest</a>, <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> and contributors.'
    </script>
</head>
<body>
    <div id="map"></div>
    <script>
        var aMap = L.map('map').setView([-2.9, -79], 13);

        var onReady = function(){
            console.log("I am so READY!");
            aLayer.addTo(aMap);
            var controls = new MyControl();
            controls.setOfflineLayer(aLayer);
            aMap.addControl(controls);
        }
        var aLayer = new OfflineLayer(mapquestUrl, {maxZoom: 18, attribution: mapquestAttrib, subdomains: subDomains, onReady: onReady});
    </script>
</body>
</html>